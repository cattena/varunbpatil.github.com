<html>
<head>
    <meta charset="utf-8"/>

    <!-- TO Fancy SEARCH ENGINE -->
    <title>Varun B Patil | Android reverse USB tethering</title>
    <meta name="description" content="Varun B Patil's blog"/>

    <!-- TO FANCY GOOGLE -->
    <meta itemprop="name" content="Varun B Patil's blog"/>
    <meta itemprop="description" content="Varun B Patil blog"/>

    <!-- TO FANCY FACEBOOK -->
    <meta property="og:title" content="Varun B Patil's blog" />
    <meta property="og:type" content="blog" />
    <meta property="og:url" content="http://varunbpatil.github.com/" />
    <meta property="og:site_name" content="Varun B Patil's blog" />

    <meta name="keywords" content="Varun B Patil's blog"/>
    <meta name="robots" content="noodp" />

    <link rel="stylesheet" media="all" href="/style.css"/>
    <link rel="stylesheet" media="all" href="/style_accordion.css"/>
    <link rel="shortcut icon" href="/favicon.ico"/>

    <link href='http://fonts.googleapis.com/css?family=Quantico' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Trade+Winds' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Autour+One' rel='stylesheet' type='text/css'>


    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32267446-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    <!--jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../js/custom.js"></script>
    <script type="text/javascript" src="../js/smoothscroll.js"></script>

</head>
<body>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter21595372 = new Ya.Metrika({id:21595372,
                        webvisor:true,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        trackHash:true});
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
    </script>
    <!-- /Yandex.Metrika counter -->

    <div id="wrapper">
        <div style="width:100%;position:fixed;z-index:99;box-shadow:0px 5px 5px #888888;">
        <header id="header">
            <div class="inner">
                <a href="/"><h1 id="site-name">Varun B Patil</h1></a>
                <nav id="navigation">
                <ul class="navigation">
                
                    
                    
                        
                            
                        
                    
                    <li>
                    <span class="">
                    <a class="" href="/index.html" target="">HOME</a>
                    </span>
                    </li>
                
                    
                    
                        
                            
                        
                    
                    <li>
                    <span class="">
                    <a class="" href="/profile/index.html" target="">PROFILE</a>
                    </span>
                    </li>
                
                    
                    
                        
                            
                        
                            
                                
                            
                        
                    
                    <li>
                    <span class="current">
                    <a class="current" href="/blog/index.html" target="">BLOG</a>
                    </span>
                    </li>
                
                    
                    
                        
                            
                        
                            
                        
                            
                        
                    
                    <li>
                    <span class="">
                    <a class="" href="/tag/index.html" target="">TAGS</a>
                    </span>
                    </li>
                
                </ul>
                </nav>
            </div>
        </header>
        </div>

<br />
<br />
<br />
<div id="main">
<article class="post">
    <header class="post-header">
        <h1 class="post-title">Android reverse USB tethering</h1>
    </header><!-- post-title -->
    <div class="post-meta">
        <time class="date" datetime="2014-03-21T00:00:00+05:30">21 March 2014</time>
        <cite><em> &nbsp;&nbsp;by</em> Varun B Patil</cite>

    </div><!-- .post-meta -->
    <p class="postpage"><span style="font-style:italic">tagged under</span>&nbsp;&nbsp;
    
        <a class="tag" href="/tags/android/">android</a> &nbsp;
    
        <a class="tag" href="/tags/linux/">linux</a> &nbsp;
    
    </p>
    <br />
    <div class="post">
      <p>We all know what USB tethering is in android -- enabling internet connectivity on your PC via your phone. Reverse USB tethering is... well... exactly the reverse. Enabling internet connectivity on your phone via your PC. The following tutorial shows you how to set up reverse USB tethering on Linux. Also included is a shell script to automate the setup on Linux.</p>

<h4>How to set up reverse USB tethering on Linux</h4>

<ul>
<li>Connect your android phone to your PC via USB and enable USB tethering from the settings on your phone.</li>
<li><p>Find out the new network interface that was created on your PC with the following command.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ ifconfig  # on your PC
</code></pre></div></li>
</ul>

<p>In my case, the new network interface was <strong>usb0</strong>.</p>

<ul>
<li><p>Enter the following commands on your Linux PC.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo ifconfig usb0 10.42.0.1 netmask 255.255.255.0

$ echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward

$ sudo iptables -t nat -F

$ sudo iptables -t nat -A POSTROUTING -j MASQUERADE
</code></pre></div></li>
<li><p>Enter the following commands on your android phone. You can either use terminal emulator or enter the command through <a href="http://localhost:4000/2012/06/18/adb/">ADB</a> like below.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ adb shell busybox ifconfig
</code></pre></div></li>
</ul>

<p>Note down the network interface on your android phone. Mine was <strong>rndis0</strong>.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ adb shell ifconfig rndis0 10.42.0.2 netmask 255.255.255.0

$ adb shell route add default gw 10.42.0.1 dev rndis0
</code></pre></div>
<p>Verify internet connectivity on your phone with</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ adb shell ping 8.8.8.8
</code></pre></div>
<p>That&#39;s it. You now have internet connectivity on your android phone.</p>

<p>I have written a small <a href="http://pastebin.com/raw.php?i=wqVnx9Vw">shell script</a> to automate the above process on Linux. You can get it with the following command.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ wget http://pastebin.com/raw.php?i=wqVnx9Vw -O rev_usb_tether.sh
</code></pre></div>
<p>Run it on your PC with the following commands.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ chmod +x rev_usb_tether.sh

$ ./rev_usb_tether.sh
</code></pre></div>
<p><strong>DISCLAIMER :</strong> Some apps like gmail, play store still won&#39;t recognize the internet connection.</p>

      <br />
      
        <a class="prev_next" style="float: left;" href="/2013/12/26/github-contrib">&laquo;&nbsp;older posts</a>
      
      
        <a class="prev_next" style="float: right;" href="/2014/06/01/network-command-line">newer posts&nbsp;&raquo;</a>
      
      <br /><br /><br /><br />
      <b>other articles you might like</b><br />
      
    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2014/08/19/t440s-touchpad">Configuring Lenovo T440s touchpad in Linux</a>
            </li>
            
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2014/06/01/truecrypt-alt">Alternatives to Truecrypt on Linux</a>
            </li>
            
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2014/06/01/network-command-line">Connecting to wired/wireless networks via command line</a>
            </li>
            
        
    

    
    
        
    
        
    

    
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/11/18/linux-tricks-3">Linux command line tools and tricks - Part 3</a>
            </li>
            
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/09/28/dwm">Basic dwm setup in (L)ubuntu</a>
            </li>
            
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/09/20/xmonad">Basic Xmonad setup in (L)ubuntu</a>
            </li>
            
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/08/19/eom">EOM a.k.a End of Mail a.k.a Emacs + offlineimap + mu4e</a>
            </li>
            
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/08/12/firefox-addon">First attempt at developing a Firefox addon</a>
            </li>
            
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/08/05/ncp">Bash script to perform super-fast file transfer using netcat and tar</a>
            </li>
            
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/07/06/jekyll-build-fail">Jekyll : Handling Github page build failure and Jekyll plugins on Github</a>
            </li>
            
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/05/26/emacs-newbie">Emacs newbie cheat sheet -- from a vim convert</a>
            </li>
            
        
    
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/04/11/ncmpcpp">ncmpcpp : ncurses based music player for Linux</a>
            </li>
            
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/03/02/apps-zip">How to create a custom CWM recovery flash-able android apps zip file in Linux via command line</a>
            </li>
            
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2013/02/19/cli-task">Task Warrior - The best CLI task manager for Linux</a>
            </li>
            
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/12/27/kernel">Custom kernel in Ubuntu (also generate .deb package)</a>
            </li>
            
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/10/01/linux-tricks-2">Linux command line tools and tricks - Part 2</a>
            </li>
            
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/09/19/linux-tricks">Superb Linux command line tools and tricks for Linux geeks</a>
            </li>
            
        
    
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/08/26/stock-defy">How to go back to stock rom on Motorola Defy</a>
            </li>
            
        
    

    
    
        
    

    
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/06/18/adb">ADBing into your android phone</a>
            </li>
            
        
    

    
    
        
    
        
    

    
    
        
    
        
    

    
    
        
    

    
    
        
    

    
    
        
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/05/26/last-few-months">Interesting last few months</a>
            </li>
            
        
    
        
    

    
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/01/15/miui-motorola-defy">Tested : MIUI rom on Motorola Defy</a>
            </li>
            
        
    
        
    
        
    

    
    
        
    
        
            <li style="list-style:none;font-size:16px;margin-bottom:-3px;">
                <a href="/2012/01/10/rsa-tcl">RSA encryption using Tcl</a>
            </li>
            
        
    

    
    
        
    
        
    

    </div>
    <br />
    <br />
    <br />


<p style="float: left; margin-top: 4px;">Share this post &rArr;&nbsp;&nbsp;</p>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_32x32_style">
<a style="border-bottom:0" class="addthis_button_preferred_1"></a>
<a style="border-bottom:0" class="addthis_button_preferred_2"></a>
<a style="border-bottom:0" class="addthis_button_preferred_3"></a>
<a style="border-bottom:0" class="addthis_button_preferred_4"></a>
<a style="border-bottom:0" class="addthis_button_compact"></a>
<a style="border-bottom:0" class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4fd1e13840ac7423"></script>
<!-- AddThis Button END -->


<br />
<br />
<br />
<br />

</article><!-- .post -->
</div>

<div class="fb_comments">
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'varunbpatil'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>





</div>

<br />
<br />
<br />
<footer id="footer" style="clear: both">
    <div class="inner">

        <p class="social" style="margin-top: -10px;">Contact me &nbsp;&rarr;&nbsp;&nbsp;
                <a title="facebook" class="social" href="http://www.facebook.com/varunbpatil" target="_blank"><img src="/PNGs/facebook.png" width="32px" /></a>
                <a title="twitter" class="social" href="http://twitter.com/#!/varunbpatil" target="_blank"><img src="/PNGs/twitter.png" width="32px" /></a>
                <a title="linkedin" class="social" href="https://www.linkedin.com/in/varunbpatil/" target="_blank"><img src="/PNGs/linkedin.png" width="32px" /></a>
                <a title="google+" class="social" href="https://plus.google.com/112161568047512619329/posts" target="_blank"><img src="/PNGs/googleplus.png" width="32px" /></a>
                <a title="github" class="social" href="https://github.com/varunbpatil/" target="_blank"><img src="/PNGs/github.png" width="32px" /></a>
                <a title="gmail" class="social" href="mailto:varun.basavaraj.patil@gmail.com" target="_blank"><img src="/PNGs/gmail.png" width="32px" /></a>
        </p>



        <p class="social" style="margin-bottom: 23px;">Subscribe to my posts &nbsp;&rarr;&nbsp;&nbsp;
                <a title="subscribe via RSS" class="social" href="http://feeds.feedburner.com/varunbpatil" target="_blank"><img src="/PNGs/rss.png" width="36px" /></a>
                <a title="subscribe via e-mail" class="social" href="http://feedburner.google.com/fb/a/mailverify?uri=varunbpatil&amp;loc=en_US" target="_blank"><img src="/PNGs/mail.png" width="36px" /></a>
                <a class="social" href="http://feeds.feedburner.com/varunbpatil" target="_blank"><img src="http://feeds.feedburner.com/~fc/varunbpatil?bg=BDBDBD&amp;fg=000000&amp;anim=0" height="29" width="88" style="border:0" alt="" /></a>
        </p>




        <p class="social">powered by &nbsp;&rarr;&nbsp;&nbsp;
        <a class="social" href="https://github.com/mojombo/jekyll"><span>jekyll</span></a>
        <a class="social" href="https://github.com/Shopify/liquid"><span>liquid</span></a>
        <a class="social" href="https://github.com/"><span>github</span></a>
        </p>
    </div>
</footer>

</div>
</body>
</html>

